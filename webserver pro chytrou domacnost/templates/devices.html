{% extends "flat_map.html" %}
{% block devices %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<table>
    <tr>
        <th>Room</th>
        <th>Status</th>
        <th>Control</th>
    </tr>
    {% for light in lights_id %}
        <tr>
            <td>{{ light[:-5] }}</td>
            <td>{{ light_status[lights_id[light]] }}</td>
            <!-- https://stackoverflow.com/questions/9856576/casting-ints-to-str-in-jinja2 -->
            {% set device_url = "$.get('/" ~ lights_id[light] ~ "/info'); " %}
            <td><button onmousedown= {{device_url}}> Zapnout svetlo </button> </td>
        </tr>
    {% endfor %}
</table>

{% endblock devices %}